{% extends "layout.html" %}

{% block main %}
  {% if message %}
    <br />
    <div id="messagebox">
    <p class="center">{{ message }}</p>
    </div>
    <br />
  {% endif %}

  <h1 class="center">Brown University APIs</h1>
  <p class="center"><em>...a work-in-progress!</em></p>


  <h2>Introduction</h1>

  <p>Hey there! Brown APIs is a set of web APIs for getting useful information about Brown. In general, to form a request, pick a method from below and look at some of the sample queries to get a feel for how the API works. Also, join the <a href="https://www.facebook.com/groups/brown.apis/">Brown APIs group</a> on Facebook for FAQs and community support!</p>

  <p>To make requests, you'll need a Client ID. <strong>You can request a Client ID <a href="/signup">here</a>.</strong></p>
  <p>Your Client ID is used as the parameter 'client_id' in your GET requests. For instance:</p>
  <div class="center">
    <div class="codeblock">
      <code>
        https://api.students.brown.edu/dining/menu?<strong>client_id=01234567-89ab-cdef-0123-456789abcdef</strong>&amp;eatery=ratty
      </code>
    </div>
  </div>
  <p>Currently, all requests are specified as GET requests with URL encoded parameters.</p>

  <hr />

  <p><strong>Note about errors:</strong> When requests fail for any reason, a list of errors will be returned in the form:  </p>

  <div class="center">
    <div class="codeblock">
      <code>
        {'error': ["Some (hopefully) informative error message.", "Possibly another message."]}
      </code>
    </div>
  </div>

  <hr />

  <h2 onclick="toggle_vis('dining');"><a href="#">Brown Dining Services</a></h2>

  <div id="dining" class="api">
    <p>The eatery names are always '<em>ratty</em>' or '<em>vdub</em>'. Currently, only the Ratty and VDub are supported.</p>

    <h3>Request Dining Menu</h3>

    <div class="endpoint">
      <strong>Endpoint</strong>: "<em>/dining/menu</em>" 
      <br />
      <strong>Parameters</strong>:
      <ul class="parameters">
        <li>eatery: either 'ratty' or 'vdub' <em>(string)</em></li>
        <li>year <em>(optional)</em>: the current year will be inferred <em>(integer)</em></li>
        <li>month <em>(optional)</em>: the current month will be inferred <em>(integer between 1-12)</em></li>
        <li>day <em>(optional)</em>: the current day will be inferred <em>(integer between 1-31)</em></li>
        <li>hour <em>(optional)</em>: the current hour will be inferred <em>(integer between 0-23)</em></li>
        <li>minute <em>(optional)</em>: the current minute will be inferred <em>(integer between 0-59)</em></li>
      </ul>
      <strong>Returns</strong>: the number of menus found and a list of those menus in the form: 
      <pre class="parameters">
      {'num_results': <em>INTEGER</em>, 
       'menus': {'eatery': <em>STRING</em>, 
             'year': <em>INTEGER</em>, 
             'month': <em>INTEGER</em>, 
             'day': <em>INTEGER</em>, 
             'start_hour': <em>INTEGER</em>, 
             'start_minute': <em>INTEGER</em>, 
             'end_hour': <em>INTEGER</em>, 
             'end_minute': <em>INTEGER</em>, 
             &lt;menu_section1&gt;: [<em>STRING</em>, <em>STRING</em>, ...],
             &lt;menu_section2&gt;: [<em>STRING</em>, <em>STRING</em>, ...],
             ...}}
      </pre>
      <em>NOTE</em>: Each eatery has different menu sections (e.g. "Bistro", "Main Menu", etc).
      <br />
      <em>NOTE</em>: If the eatery is closed, num_results will equal zero.
      <br />
      <br />

        <strong>Examples:</strong>
        <br />
        <span class="example">How to get the current menu at the Ratty...</span>
      <br />
      <div class="center">
        <div class="codeblock">
          <code>
            https://api.students.brown.edu/dining/menu?client_id=your-client-id&amp;eatery=ratty
          </code>
        </div>
      </div>
      <br/>
      <span class="example">How to get the menu at the Ratty on the 16th of this month at 5PM (that's 17:00!)...</span>
      <div class="center">
        <div class="codeblock">
          <code>
            https://api.students.brown.edu/dining/menu?client_id=your-client-id&amp;eatery=ratty&amp;day=16&amp;hour=17
          </code>
        </div>
      </div>
    </div>

    <h3>Request Dining Hours</h3>

    <div class="endpoint">
      <strong>Endpoint</strong>: "<em>/dining/hours</em>" 
      <br />
      <strong>Parameters</strong>: {'eatery':RATTY/VDUB/..., 'year':YEAR, 'month':MONTH, 'day':DAY} 
      <ul class="parameters">
        <li>eatery: either 'ratty' or 'vdub' <em>(string)</em></li>
        <li>year <em>(optional)</em>: the current year will be inferred <em>(integer)</em></li>
        <li>month <em>(optional)</em>: the current month will be inferred <em>(integer between 1-12)</em></li>
        <li>day <em>(optional)</em>: the current day will be inferred <em>(integer between 1-31)</em></li>
      </ul>
      <strong>Returns</strong>: 
      <pre class="parameters">
      {'num_results': <em>INTEGER</em>, 
       [{'eatery': <em>STRING</em>, 
         'year': <em>INTEGER</em>, 
         'month': <em>INTEGER</em>, 
         'day': <em>INTEGER</em>, 
         'open_hour': <em>INTEGER</em>, 
         'open_minute': <em>INTEGER</em>, 
         'close_hour': <em>INTEGER</em>, 
         'close_minute': <em>INTEGER</em>}, 
        ...]}
      </pre>
      <strong>Example:</strong>
        <br />
        <span class="example">How to get todays hours for the Ratty...</span>
      <br />
      <div class="center">
        <div class="codeblock">
          <code>
            https://api.students.brown.edu/dining/hours?client_id=your-client-id&amp;eatery=ratty
          </code>
        </div>
      </div>
    </div>


    <h3>Find Eatery Serving Specific Food</h3>

    <div class="endpoint">
      <strong>Endpoint</strong>: "<em>/dining/find</em>" 
      <br />
      <strong>Parameters</strong>:
      <ul class="parameters">
        <li>food: the name of the food item (e.g. "roasted parsnips") <em>(string)</em></li>
      </ul>
      <strong>Returns</strong>:
      <pre class="parameters">
          {'food': <em>STRING</em>, 
           'results': [&lt;menu_1&gt;, &lt;menu_2&gt;, ...]} 
      </pre>

      <em>NOTE</em>: &lt;menu_N&gt; is a menu object just like in the response from "<em>dining/menu</em>".
      <br />
      <em>NOTE</em>: The given food name may be autocorrected to another string if it does not match any foods in the database.
      <br />
      <br />

      <strong>Example:</strong>
      <br />
        <span class="example">Find out when/where the pulled pork sandwich is being served...</span>
      </br>
      <div class="center">
        <div class="codeblock">
          <code>
            https://api.students.brown.edu/dining/find?client_id=your-client-id&amp;food=pulled%20pork%20sandwich
          </code>
        </div>
      </div> 
    </div>

    <h3>Find Open Eateries</h3>

    <div class="endpoint">
      <strong>Endpoint</strong>: "<em>/dining/open</em>" 
      <br />
      <strong>Parameters</strong>: {'year':YEAR, 'month':MONTH, 'day':DAY, 'hour':HOUR, 'minute':MINUTE}
      <ul class="parameters">
        <li>year <em>(optional)</em>: the current year will be inferred <em>(integer)</em></li>
        <li>month <em>(optional)</em>: the current month will be inferred <em>(integer between 1-12)</em></li>
        <li>day <em>(optional)</em>: the current day will be inferred <em>(integer between 1-31)</em></li>
        <li>hour <em>(optional)</em>: the current hour will be inferred <em>(integer between 0-23)</em></li>
        <li>minute <em>(optional)</em>: the current minute will be inferred <em>(integer between 0-59)</em></li>
      </ul>
      <strong>Returns</strong>:
      <pre class="parameters">
        {'open_eateries': [hours_1, hours_2, ...]}
      </pre>

      <em>NOTE</em>: &lt;hours_N&gt; is an hours object just like in the response from "<em>dining/hours</em>".
      <br />
      <br />

        <strong>Example:</strong>
        <br />
        <span class="example">Find out what eateries are currently open...</span>
      </br>
      <div class="center">
        <div class="codeblock">
          <code>
            https://api.students.brown.edu/dining/find?client_id=your-client-id
          </code>
        </div>
      </div> 
    </div>
  </div>


  <h2 onclick="toggle_vis('shuttle');"><a href="#">Brown Shuttle</a></h2>

  <div id="shuttle" class="api">
    <em>Coming next fall!</em> The University is switching shuttle providers over the summer.
  </div>


  <h2 onclick="toggle_vis('criticalreview');"><a href="#">The Critical Review</a></h2>

  <div id="criticalreview" class="api">
    <em>Coming this summer!</em> The Critical Review's staff is working to bring you as much course data as possible.
  </div>

  <div class="center">
    <br />
    <br />
    <div class="codeblock">
      <code>
        <em>Requests made so far: </em> <strong>{{ num_requests }}</strong>
      </code>
    </div>
  </div>
{% endblock %}